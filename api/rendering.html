<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Larvitar Documentation</title><meta name="description" content="Documentation for the Larvitar library">
    <link rel="preload" href="/assets/style--l-zKV1s.css" as="style"><link rel="stylesheet" href="/assets/style--l-zKV1s.css">
    <link rel="modulepreload" href="/assets/app-BVwHBcsb.js"><link rel="modulepreload" href="/assets/rendering.html-Cd7w-5xd.js">
    <link rel="prefetch" href="/assets/index.html-B13rGNqA.js" as="script"><link rel="prefetch" href="/assets/index.html-BVx78I5Q.js" as="script"><link rel="prefetch" href="/assets/initializing.html-DWxj0CD1.js" as="script"><link rel="prefetch" href="/assets/interacting.html-wliH5kXU.js" as="script"><link rel="prefetch" href="/assets/loading.html-DBpVGVTO.js" as="script"><link rel="prefetch" href="/assets/parsing.html-CizzM823.js" as="script"><link rel="prefetch" href="/assets/testing.html-CfkEvZGZ.js" as="script"><link rel="prefetch" href="/assets/examples.html-jbWaqg58.js" as="script"><link rel="prefetch" href="/assets/index.html-3AxcbvlR.js" as="script"><link rel="prefetch" href="/assets/installation.html-4Ht6ZK62.js" as="script"><link rel="prefetch" href="/assets/logger.html-Lt1zdCJ6.js" as="script"><link rel="prefetch" href="/assets/store.html-DtJ-2av-.js" as="script"><link rel="prefetch" href="/assets/dicomLoader.html-DmPujtur.js" as="script"><link rel="prefetch" href="/assets/dsaImageLoader.html-B_LsPTMF.js" as="script"><link rel="prefetch" href="/assets/fileLoader.html-BB3Yxy7p.js" as="script"><link rel="prefetch" href="/assets/loaders.html-DUi7Hrxl.js" as="script"><link rel="prefetch" href="/assets/multiframeLoader.html-oox3HsCj.js" as="script"><link rel="prefetch" href="/assets/nrrdLoader.html-BTMg4gxR.js" as="script"><link rel="prefetch" href="/assets/singleFrameLoader.html-CP5V9bZa.js" as="script"><link rel="prefetch" href="/assets/fileManager.html-3IEeRJCH.js" as="script"><link rel="prefetch" href="/assets/gspsManager.html-DRU5Y_YJ.js" as="script"><link rel="prefetch" href="/assets/imageManager.html-DquI0-Km.js" as="script"><link rel="prefetch" href="/assets/ecg.html-D4n8oEtQ.js" as="script"><link rel="prefetch" href="/assets/nrrd.html-CGma_SXm.js" as="script"><link rel="prefetch" href="/assets/pdf.html-CibWwVxp.js" as="script"><link rel="prefetch" href="/assets/applyKernel.html-DUgiqPtH.js" as="script"><link rel="prefetch" href="/assets/dsa.html-BzG-1qcS.js" as="script"><link rel="prefetch" href="/assets/cypress.html-DEDLT-Ed.js" as="script"><link rel="prefetch" href="/assets/default.html-Blo7MnsQ.js" as="script"><link rel="prefetch" href="/assets/dvTools.html-C3HmUXvw.js" as="script"><link rel="prefetch" href="/assets/initialization.html-C2FdW8qq.js" as="script"><link rel="prefetch" href="/assets/segmentation.html-Ch2Yaotc.js" as="script"><link rel="prefetch" href="/assets/tools.html-4CPuYwHJ.js" as="script"><link rel="prefetch" href="/assets/anonymization.html-KqF8skRv.js" as="script"><link rel="prefetch" href="/assets/customization.html-Cj2f8x_c.js" as="script"><link rel="prefetch" href="/assets/imageTags.html-B7f79cCY.js" as="script"><link rel="prefetch" href="/assets/imageUtils.html-52R6byIz.js" as="script"><link rel="prefetch" href="/assets/memory.html-lJCVXM4T.js" as="script"><link rel="prefetch" href="/assets/stressEchoProtocol.html-eysPEHlM.js" as="script"><link rel="prefetch" href="/assets/colorMaps.html-BWdTBAlR.js" as="script"><link rel="prefetch" href="/assets/ecg.html-DVggt7zr.js" as="script"><link rel="prefetch" href="/assets/gspsTool.html-DH6wcyC1.js" as="script"><link rel="prefetch" href="/assets/layers.html-BXlkGom2.js" as="script"><link rel="prefetch" href="/assets/404.html-C7HgF_WA.js" as="script"><link rel="prefetch" href="/assets/SearchResult-CK6ALX8u.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-CqNpmYkr.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">Larvitar Documentation</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/guide/" aria-label="Guide"><!---->Guide<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/api/" aria-label="API"><!---->API<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/dvisionlab/Larvitar" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="slimsearch-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">Search</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/guide/" aria-label="Guide"><!---->Guide<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/api/" aria-label="API"><!---->API<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/dvisionlab/Larvitar" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">API <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/initializing.html" aria-label="Initializing"><!---->Initializing<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/parsing.html" aria-label="Parsing"><!---->Parsing<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/loading.html" aria-label="Loading"><!---->Loading<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/api/rendering.html" aria-label="Rendering"><!---->Rendering<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/interacting.html" aria-label="Interacting"><!---->Interacting<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/testing.html" aria-label="Testing"><!---->Testing<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item">Modules <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/logger.html" aria-label="Logger"><!---->Logger<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/store.html" aria-label="Store"><!---->Store<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item">Managers <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/managers/imageManager.html" aria-label="Image Manager"><!---->Image Manager<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/managers/gspsManager.html" aria-label="GSPS Manager"><!---->GSPS Manager<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/managers/fileManager.html" aria-label="File Manager"><!---->File Manager<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">Parsers <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/parsers/pdf.html" aria-label="PDF Parser"><!---->PDF Parser<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/parsers/nrrd.html" aria-label="NRRD Parser"><!---->NRRD Parser<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/parsers/ecg.html" aria-label="ECG Parser"><!---->ECG Parser<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/loaders/loaders.html" aria-label="Loaders"><!---->Loaders<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/loaders/dicomLoader.html" aria-label="DICOM Loader"><!---->DICOM Loader<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/loaders/multiframeLoader.html" aria-label="MultiFrame Loader"><!---->MultiFrame Loader<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/loaders/singleFrameLoader.html" aria-label="SingleFrame Loader"><!---->SingleFrame Loader<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/loaders/dsaImageLoader.html" aria-label="DSA Image Loader"><!---->DSA Image Loader<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/loaders/fileLoader.html" aria-label="File Loader"><!---->File Loader<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/loaders/nrrdLoader.html" aria-label="Nrrd Loader"><!---->Nrrd Loader<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">Interaction Tools <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/tools/initialization.html" aria-label="Initialize and manage Tools"><!---->Initialize and manage Tools<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/tools/default.html" aria-label="Default and Custom Tools"><!---->Default and Custom Tools<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/tools/segmentation.html" aria-label="Segmentation Tools"><!---->Segmentation Tools<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/tools/dvTools.html" aria-label="DvTools"><!---->DvTools<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">Utilities <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/utilities/anonymization.html" aria-label="DICOM Anonymization"><!---->DICOM Anonymization<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/utilities/customization.html" aria-label="DICOM Customization"><!---->DICOM Customization<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/utilities/imageTags.html" aria-label="Tags"><!---->Tags<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/utilities/imageUtils.html" aria-label="Utils"><!---->Utils<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/utilities/memory.html" aria-label="Memory"><!---->Memory<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">Post Processing <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/postProcessing/dsa.html" aria-label="DSA"><!---->DSA<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/postProcessing/applyKernel.html" aria-label="Image Filters"><!---->Image Filters<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">Visualizations <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/visualizations/layers.html" aria-label="Layers"><!---->Layers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/visualizations/ecg.html" aria-label="ECG"><!---->ECG<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/visualizations/colorMaps.html" aria-label="Color Maps"><!---->Color Maps<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/visualizations/gspsTool.html" aria-label="Greyscale Presentation States"><!---->Greyscale Presentation States<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/modules/tests/cypress.html" aria-label="Testing"><!---->Testing<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><div style="text-align:center;"><img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/246.png" alt="Larvitar" height="200"></div><h2 id="image-rendering-and-manipulation-api" tabindex="-1"><a class="header-anchor" href="#image-rendering-and-manipulation-api"><span>Image Rendering and Manipulation API</span></a></h2><p>The Image Rendering and Manipulation API provides essential functions for caching, loading, rendering, and modifying images within the Larvitar framework. These functionalities ensure smooth visualization and efficient image handling across different formats and use cases.</p><h3 id="overview" tabindex="-1"><a class="header-anchor" href="#overview"><span>Overview</span></a></h3><p>The Image Rendering and Manipulation API is responsible for managing images in the viewport, enabling real-time interaction and modification. With this API, you can perform the following tasks:</p><ul><li>Load and cache images from different sources and formats</li><li>Render images from local files or web sources</li><li>Control viewport display settings</li><li>Apply transformations such as inversion, flipping, and rotation</li><li>Update and store viewport data</li></ul><h3 id="image-caching-and-loading" tabindex="-1"><a class="header-anchor" href="#image-caching-and-loading"><span>Image Caching and Loading</span></a></h3><p>Efficient image caching and loading are crucial for seamless rendering. These functions handle storing images temporarily to enhance performance and responsiveness.</p><ul><li><code>clearImageCache(seriesId)</code>: Removes all cached images associated with a specific series ID, freeing up memory and storage.</li><li><code>loadAndCacheImage(imageIndex)</code>: Loads an image by its index and stores it in cache for quick access.</li><li><code>loadAndCacheImages(seriesData)</code>: Loads and caches multiple images based on the provided series metadata.</li></ul><h3 id="image-rendering" tabindex="-1"><a class="header-anchor" href="#image-rendering"><span>Image Rendering</span></a></h3><p>These functions enable rendering of images from various sources and formats.</p><ul><li><code>renderFileImage(file, elementId)</code>: Renders an image from a local file (PNG, JPEG, PDF) to the specified viewport element. <ul><li><strong>PNG &amp; JPEG:</strong> Directly displayed as standard 2D images.</li><li><strong>PDF:</strong> Requires conversion to an image format before rendering.</li></ul></li><li><code>renderWebImage(url, elementId)</code>: Loads and renders an image from a URL (PNG, JPEG, or other supported formats) into the designated viewport.</li><li><code>renderImage(series, elementId, options)</code>: Displays an image series in the viewport while applying default rendering properties such as contrast, brightness, and annotations or caching settings. It also updates the displayed image in a given series, ensuring smooth navigation between slices or frames</li></ul><h3 id="viewport-management" tabindex="-1"><a class="header-anchor" href="#viewport-management"><span>Viewport Management</span></a></h3><p>Viewport management functions control how images are displayed and interacted with in the user interface.</p><ul><li><code>disableViewport(elementId)</code>: Disables a specific viewport, preventing further interactions or rendering.</li><li><code>unloadViewport(elementId, seriesId)</code>: Unloads image data from the viewport, clearing the displayed image without affecting cached data.</li><li><code>resizeViewport(elementId)</code>: Adjusts the viewport size dynamically, maintaining aspect ratio and resolution settings.</li><li><code>resetViewports([elementIds])</code>: Resets one or more viewports to their default state, clearing transformations and modifications.</li><li><code>updateViewportData(elementId)</code>: Updates the viewportâ€™s metadata, including zoom level, pan position, and windowing parameters.</li><li><code>toggleMouseHandlers(elementId, disableFlag)</code>: Enables or disables mouse event handlers such as zoom, pan, and scroll within a viewport.</li><li><code>storeViewportData(params...)</code>: Saves viewport settings, ensuring consistency when switching between views or restoring previous states.</li></ul><h3 id="image-transformations" tabindex="-1"><a class="header-anchor" href="#image-transformations"><span>Image Transformations</span></a></h3><p>Image transformation functions allow real-time modifications to improve visualization and analysis.</p><ul><li><code>invertImage(elementId)</code>: Inverts the colors of the displayed image (useful for certain radiological interpretations).</li><li><code>flipImageHorizontal(elementId)</code>: Flips the image horizontally, mirroring its content.</li><li><code>flipImageVertical(elementId)</code>: Flips the image vertically, useful for correcting misoriented images.</li><li><code>rotateImageLeft(elementId)</code>: Rotates the image 90 degrees counterclockwise.</li><li><code>rotateImageRight(elementId)</code>: Rotates the image 90 degrees clockwise.</li></ul><h2 id="rendering-api-renderimage" tabindex="-1"><a class="header-anchor" href="#rendering-api-renderimage"><span>Rendering API <code>renderImage</code></span></a></h2><p>The <code>renderImage</code> function is responsible for rendering a DICOM image onto a specified HTML element using the cornerstone.js library. It initializes the rendering environment, loads the image, and applies optional transformations. It supports caching for improved performance.</p><h3 id="function-signature" tabindex="-1"><a class="header-anchor" href="#function-signature"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">renderImage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  seriesStack<span class="token operator">:</span> Series<span class="token punctuation">,</span></span>
<span class="line">  elementId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HTMLElement<span class="token punctuation">,</span></span>
<span class="line">  options<span class="token operator">?</span><span class="token operator">:</span> RenderProps</span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters" tabindex="-1"><a class="header-anchor" href="#parameters"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>seriesStack</code></td><td><code>Series</code></td><td>The series stack containing image data.</td></tr><tr><td><code>elementId</code></td><td><code>string or HTMLElement</code></td><td>The ID or the actual HTML element where the image will be rendered.</td></tr><tr><td><code>options</code></td><td><code>RenderProps (optional)</code></td><td>Optional configuration options for rendering.</td></tr></tbody></table><h4 id="renderprops-interface" tabindex="-1"><a class="header-anchor" href="#renderprops-interface"><span><code>RenderProps</code> Interface</span></a></h4><p>All properties are optional.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>cached</code></td><td><code>boolean</code></td><td>Whether to cache the image for future use.</td></tr><tr><td><code>imageIndex</code></td><td><code>number</code></td><td>The index of the image to be rendered (0, N-1)</td></tr><tr><td><code>scale</code></td><td><code>number</code></td><td>The scale factor for the image.</td></tr><tr><td><code>rotation</code></td><td><code>number</code></td><td>The rotation angle for the image.</td></tr><tr><td><code>translation</code></td><td><code>translation</code></td><td>The translation vector for the image.</td></tr><tr><td><code>voi</code></td><td><code>contrast</code></td><td>The windowing parameters for the image.</td></tr><tr><td><code>colormap</code></td><td><code>string</code></td><td>The colormap to be applied to the image.</td></tr><tr><td><code>default.scale</code></td><td><code>number</code></td><td>Default scale factor for the image.</td></tr><tr><td><code>default.rotation</code></td><td><code>number</code></td><td>Default rotation angle for the image.</td></tr><tr><td><code>default.translation</code></td><td><code>translation</code></td><td>Default translation vector for the image.</td></tr><tr><td><code>default.voi</code></td><td><code>contrast</code></td><td>Default windowing parameters for the image.</td></tr><tr><td><code>filterName</code></td><td><code>string</code></td><td>The name of the filter to apply to the displayed image.</td></tr></tbody></table><h4 id="contrast-interface" tabindex="-1"><a class="header-anchor" href="#contrast-interface"><span><code>contrast</code> Interface</span></a></h4><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>windowWidth</code></td><td><code>number</code></td><td>The window width for the image.</td></tr><tr><td><code>windowCenter</code></td><td><code>number</code></td><td>The window center for the image.</td></tr></tbody></table><h4 id="translation-interface" tabindex="-1"><a class="header-anchor" href="#translation-interface"><span><code>translation</code> Interface</span></a></h4><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>x</code></td><td><code>number</code></td><td>The translation along the x-axis.</td></tr><tr><td><code>y</code></td><td><code>number</code></td><td>The translation along the y-axis.</td></tr></tbody></table><h3 id="returns" tabindex="-1"><a class="header-anchor" href="#returns"><span>Returns</span></a></h3><ul><li>A <code>Promise&lt;true&gt;</code> that resolves when the image is successfully rendered.</li></ul><h3 id="how-it-works" tabindex="-1"><a class="header-anchor" href="#how-it-works"><span>How it works</span></a></h3><ol><li><p><strong>Retrieve the Target HTML Element</strong></p><ul><li>Checks if the given <code>elementId</code> is valid and retrieves the HTML element.</li><li>If the element is invalid, the function logs an error and rejects the promise.</li></ul></li><li><p><strong>Enable Cornerstone on the Element</strong></p><ul><li>If the element is not already enabled, it enables it using <code>cornerstone.enable</code>.</li><li>Enable mouse listeners for the element using <code>toggleMouseToolsListeners</code>.</li></ul></li><li><p><strong>Prepare Image Data</strong></p><ul><li>Extracts series metadata and retrieves the appropriate image ID based on the series stack and optional <code>renderProps.imageIndex</code> value.</li><li>If the image ID is missing, it logs a warning and rejects the promise.</li><li>If <code>renderProps</code> is provided, it applies custom viewport settings.</li><li>If the image is anisotropic (<code>rowPixelSpacing !== colPixelSpacing</code> checked through <code>isAnisotropic</code>), a <code>displayedArea</code> property is applied to ensure the correct maintenance of the aspect ratio.</li></ul></li><li><p><strong>Check for Series Change</strong></p><ul><li>Determines whether the current series (<code>uniqueID</code>) differs from the previously loaded one.</li></ul></li><li><p><strong>Handle DSA (Digital Subtraction Angiography)</strong></p><ul><li>If the series is DSA, sets the pixel shift using <code>setPixelShift</code> to ensure proper rendering.</li><li>If the series is DSA extract the imageId from the dsa series stack.</li></ul></li><li><p><strong>Load and Render the Image</strong></p><ul><li>Loads the image using <code>cornerstone.loadImage</code> or <code>cornerstone.loadAndCacheImage</code> depending on the <code>cached</code> option. If <code>cached</code> is true, the image is cached for future use and imageId is flagged as cached into the store.</li><li>Displays the image in the specified viewport.</li><li>Set optional custom settings such as scale, rotation, translation, colormap, and windowing parameters based on the <code>renderProps</code> parameter.</li><li>if the series has changed, it resets the viewport to its default state if not specified otherwise in the <code>renderProps</code> parameter.</li></ul></li><li><p><strong>Store Viewport Data</strong></p><ul><li>Saves viewport settings to ensure consistency across different renderings.</li><li>Sets <code>ready</code> status in the store to <code>true</code>.</li></ul></li><li><p><strong>Performance Logging and Cleanup</strong></p><ul><li>Logs the time taken for rendering.</li><li>Clears memory references to avoid memory leaks.</li></ul></li></ol><h3 id="example-usage" tabindex="-1"><a class="header-anchor" href="#example-usage"><span>Example Usage</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">const</span> options<span class="token operator">:</span> RenderProps <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  cached<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  scale<span class="token operator">:</span> <span class="token number">1.5</span><span class="token punctuation">,</span></span>
<span class="line">  translation<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  colormap<span class="token operator">:</span> <span class="token string">&quot;hotiron&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  voi<span class="token operator">:</span> <span class="token punctuation">{</span> windowWidth<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> windowCenter<span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    scale<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    translation<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">larvitar<span class="token punctuation">.</span><span class="token function">renderImage</span><span class="token punctuation">(</span>seriesStack<span class="token punctuation">,</span> <span class="token string">&quot;viewer&quot;</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Image successfully rendered.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error rendering image:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="error-handling" tabindex="-1"><a class="header-anchor" href="#error-handling"><span>Error Handling</span></a></h3><ul><li>If the specified HTML element is invalid, the function rejects the promise with an error message.</li><li>If no image ID is found, the function logs a warning and rejects the promise.</li><li>If the viewport settings cannot be retrieved, the function logs an error and rejects the promise.</li></ul><h3 id="limitations" tabindex="-1"><a class="header-anchor" href="#limitations"><span>Limitations</span></a></h3><ul><li>Requires the series to have valid image IDs and metadata.</li><li>If using DSA, ensures <code>setPixelShift</code> is called appropriately.</li></ul><h3 id="notes" tabindex="-1"><a class="header-anchor" href="#notes"><span>Notes</span></a></h3><ul><li>This function is optimized to work with both single-frame and multi-frame DICOM images.</li><li>Uses <code>cornerstoneDICOMImageLoader</code> for fetching and handling image data.</li><li>Implements caching and efficient rendering techniques to improve performance.</li></ul><h2 id="rendering-api-renderdicompdf" tabindex="-1"><a class="header-anchor" href="#rendering-api-renderdicompdf"><span>Rendering API <code>renderDICOMPDF</code></span></a></h2><p>The <code>renderDICOMPDF</code> function is used to render a PDF from a DICOM Encapsulated PDF. It can either display the PDF directly in an HTML element or convert it into an image before rendering.</p><h3 id="function-signature-1" tabindex="-1"><a class="header-anchor" href="#function-signature-1"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">renderDICOMPDF</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  seriesStack<span class="token operator">:</span> Series<span class="token punctuation">,</span></span>
<span class="line">  elementId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HTMLElement<span class="token punctuation">,</span></span>
<span class="line">  convertToImage<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-1" tabindex="-1"><a class="header-anchor" href="#parameters-1"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>seriesStack</code></td><td><code>Series</code></td><td>The series stack containing the PDF data.</td></tr><tr><td><code>elementId</code></td><td>`string</td><td>HTMLElement`</td></tr><tr><td><code>convertToImage</code></td><td><code>boolean (optional)</code></td><td>Whether to convert the PDF to an image before rendering.</td></tr></tbody></table><h3 id="returns-1" tabindex="-1"><a class="header-anchor" href="#returns-1"><span>Returns</span></a></h3><p>Returns a <code>Promise&lt;true&gt;</code> that resolves when the PDF is successfully rendered.</p><h3 id="how-it-works-1" tabindex="-1"><a class="header-anchor" href="#how-it-works-1"><span>How it works</span></a></h3><ol><li><strong>Retrieves the Element:</strong><ul><li>Identifies the target HTML element.</li><li>Throws an error if the element is not found.</li></ul></li><li><strong>Extracts SOP Class UID:</strong><ul><li>Retrieves the first instance of the series stack.</li><li>Checks if the SOP Class UID indicates a DICOM Encapsulated PDF.</li></ul></li><li><strong>Extracts PDF Data:</strong><ul><li>If valid, extracts the PDF data from the DICOM dataset.</li><li>If <code>convertToImage</code> is <code>false</code>, embeds the PDF in an <code>&lt;object&gt;</code> tag inside the target HTML element.</li><li>if <code>convertToImage</code> is <code>true</code>, converts the PDF into PNG images and renders the first page.</li></ul></li><li><strong>Performance Logging and Cleanup:</strong><ul><li>Logs the time taken for rendering.</li><li>Clears memory references to avoid memory leaks.</li></ul></li></ol><h3 id="example-usage-1" tabindex="-1"><a class="header-anchor" href="#example-usage-1"><span>Example Usage</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">renderDICOMPDF</span><span class="token punctuation">(</span>seriesStack<span class="token punctuation">,</span> <span class="token string">&quot;pdfViewer&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;PDF successfully rendered.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error rendering PDF:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="error-handling-1" tabindex="-1"><a class="header-anchor" href="#error-handling-1"><span>Error Handling</span></a></h3><ul><li>Throws an error if the target HTML element is not found.</li><li>Rejects the promise if the SOP Class UID does not indicate a DICOM Encapsulated PDF.</li><li>If <code>convertToImage</code> is set to <code>true</code>, but image processing fails, an error message is displayed.</li></ul><h3 id="performance-considerations" tabindex="-1"><a class="header-anchor" href="#performance-considerations"><span>Performance Considerations</span></a></h3><ul><li>Performance may be affected when converting large PDFs to images.</li></ul><h2 id="rendering-api-renderfileimage" tabindex="-1"><a class="header-anchor" href="#rendering-api-renderfileimage"><span>Rendering API <code>renderFileImage</code></span></a></h2><p>The <code>renderFileImage</code> function renders an image from a local file (PNG, JPEG, PDF) onto a specified HTML element. It supports direct rendering of PNG and JPEG images and converts PDF files to images before displaying them.</p><h3 id="function-signature-2" tabindex="-1"><a class="header-anchor" href="#function-signature-2"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">renderFileImage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  file<span class="token operator">:</span> File<span class="token punctuation">,</span></span>
<span class="line">  elementId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HTMLElement</span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-2" tabindex="-1"><a class="header-anchor" href="#parameters-2"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>file</code></td><td><code>File</code></td><td>The local file to be rendered.</td></tr><tr><td><code>elementId</code></td><td>`string</td><td>HTMLElement`</td></tr></tbody></table><h3 id="returns-2" tabindex="-1"><a class="header-anchor" href="#returns-2"><span>Returns</span></a></h3><p>Returns a <code>Promise&lt;true&gt;</code> that resolves when the image is successfully rendered.</p><h3 id="how-it-works-2" tabindex="-1"><a class="header-anchor" href="#how-it-works-2"><span>How it works</span></a></h3><ol><li><strong>Retrieves the Element:</strong><ul><li>Identifies the target HTML element.</li><li>Throws an error if the element is not found.</li></ul></li><li><strong>Loads and Renders the Image:</strong><ul><li>Displays the image in the specified viewport using <a class="route-link" href="/api/modules/loaders/fileLoader.html">custom image loader</a>.</li></ul></li></ol><h3 id="example-usage-2" tabindex="-1"><a class="header-anchor" href="#example-usage-2"><span>Example Usage</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">const</span> file <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;fileInput&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">renderFileImage</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">&quot;viewer&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Image successfully rendered.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error rendering image:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="error-handling-2" tabindex="-1"><a class="header-anchor" href="#error-handling-2"><span>Error Handling</span></a></h3><ul><li>Throws an error if the target HTML element is not found.</li><li>Rejects the promise if the file is invalid or cannot be loaded.</li></ul><h3 id="performance-considerations-1" tabindex="-1"><a class="header-anchor" href="#performance-considerations-1"><span>Performance Considerations</span></a></h3><ul><li>Performance may vary based on the file size and format.</li></ul><h2 id="rendering-api-disableviewport" tabindex="-1"><a class="header-anchor" href="#rendering-api-disableviewport"><span>Rendering API <code>disableViewport</code></span></a></h2><p>The <code>disableViewport</code> function unrenders an image from the specified viewport, disabling further interactions and rendering operations.</p><h3 id="function-signature-3" tabindex="-1"><a class="header-anchor" href="#function-signature-3"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">disableViewport</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  elementId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HTMLElement</span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-3" tabindex="-1"><a class="header-anchor" href="#parameters-3"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>elementId</code></td><td><code>string | HTMLElement</code></td><td>The ID or the actual HTML element where the image is displayed.</td></tr></tbody></table><h3 id="returns-3" tabindex="-1"><a class="header-anchor" href="#returns-3"><span>Returns</span></a></h3><p>This function does not return any value.</p><h3 id="how-it-works-3" tabindex="-1"><a class="header-anchor" href="#how-it-works-3"><span>How it works</span></a></h3><ol><li><strong>Retrieves the Element:</strong><ul><li>Identifies the target HTML element.</li><li>Throws an error if the element is not found.</li></ul></li><li><strong>Remove mouse tool listeners</strong><ul><li>Disables mouse event handlers such as zoom, pan, and scroll within the viewport.</li></ul></li><li><strong>Disable Cornestone:</strong><ul><li>Disables the cornerstone library on the specified viewport element.</li></ul></li><li><strong>Updates store</strong><ul><li>Sets the <code>ready</code> status in the store to <code>false</code>.</li><li>Sets the <code>uniqueUID</code> value in the store to <code>undefined</code>.</li></ul></li><li><strong>resets DSA pixelShift</strong><ul><li>Regarding the DSA algorithm, resets the <code>pixelShift</code> value, both as constant and in the store, to <code>undefined</code>.</li></ul></li></ol><h3 id="example-usage-3" tabindex="-1"><a class="header-anchor" href="#example-usage-3"><span>Example Usage</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">disableViewport</span><span class="token punctuation">(</span><span class="token string">&quot;viewer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="error-handling-3" tabindex="-1"><a class="header-anchor" href="#error-handling-3"><span>Error Handling</span></a></h3><ul><li>Throws an error if the target HTML element is not found.</li></ul><h2 id="rendering-api-unloadviewport" tabindex="-1"><a class="header-anchor" href="#rendering-api-unloadviewport"><span>Rendering API <code>unloadViewport</code></span></a></h2><p>The <code>unloadViewport</code> function calls the <code>disableViewport</code> function to remove an image from the specified viewport. In addition, this function clears the cached image data and removes the viewport from the store.</p><h3 id="function-signature-4" tabindex="-1"><a class="header-anchor" href="#function-signature-4"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">unloadViewport</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  elementId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HTMLElement<span class="token punctuation">,</span></span>
<span class="line">  seriesId<span class="token operator">:</span> <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-4" tabindex="-1"><a class="header-anchor" href="#parameters-4"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>elementId</code></td><td><code>string | HTMLElement</code></td><td>The ID or the actual HTML element where the image is displayed.</td></tr><tr><td><code>seriesId</code></td><td><code>string</code></td><td>The unique identifier of the series associated with the viewport.</td></tr></tbody></table><h3 id="returns-4" tabindex="-1"><a class="header-anchor" href="#returns-4"><span>Returns</span></a></h3><p>This function does not return any value.</p><h3 id="how-it-works-4" tabindex="-1"><a class="header-anchor" href="#how-it-works-4"><span>How it works</span></a></h3><ol><li><strong>Disables the Viewport:</strong><ul><li>Calls the <code>disableViewport</code> function to disable the specified viewport.</li></ul></li><li><strong>Clears Cached Image Data:</strong><ul><li>Removes the cached image data associated with the specified series ID.</li><li>Frees up memory and storage resources.</li><li>Logs a message indicating that the image cache has been cleared.</li></ul></li><li><strong>Removes Viewport from Store:</strong><ul><li>Removes the viewport data from the store to prevent further interactions.</li><li>Logs a message indicating that the viewport has been unloaded.</li></ul></li></ol><h2 id="rendering-api-resizeviewport" tabindex="-1"><a class="header-anchor" href="#rendering-api-resizeviewport"><span>Rendering API <code>resizeViewport</code></span></a></h2><p>The <code>resizeViewport</code> function adjusts the size of the specified viewport element while maintaining the aspect ratio and resolution settings. This function is useful for dynamically resizing the viewport based on user interactions or window resizing events.</p><h3 id="function-signature-5" tabindex="-1"><a class="header-anchor" href="#function-signature-5"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">resizeViewport</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  elementId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HTMLElement</span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-5" tabindex="-1"><a class="header-anchor" href="#parameters-5"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>elementId</code></td><td><code>string | HTMLElement</code></td><td>The ID or the actual HTML element representing the viewport.</td></tr></tbody></table><h3 id="returns-5" tabindex="-1"><a class="header-anchor" href="#returns-5"><span>Returns</span></a></h3><p>This function does not return any value.</p><h3 id="how-it-works-5" tabindex="-1"><a class="header-anchor" href="#how-it-works-5"><span>How it works</span></a></h3><ol><li><strong>Retrieves the Element:</strong><ul><li>Identifies the target HTML element.</li><li>Throws an error if the element is not found.</li></ul></li><li><strong>Resizes the Viewport:</strong><ul><li>Adjusts the size of the viewport element based on the current window dimensions.</li><li>Maintains the aspect ratio and resolution settings of the viewport, also for anisotropic images, by retrieving its <code>displayedArea</code> using <code>AnisotropicDisplayedArea</code>.</li></ul></li></ol><h3 id="example-usage-4" tabindex="-1"><a class="header-anchor" href="#example-usage-4"><span>Example Usage</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">resizeViewport</span><span class="token punctuation">(</span><span class="token string">&quot;viewer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="error-handling-4" tabindex="-1"><a class="header-anchor" href="#error-handling-4"><span>Error Handling</span></a></h3><ul><li>Throws an error if the target HTML element is not found.</li></ul><h2 id="rendering-api-resetviewports" tabindex="-1"><a class="header-anchor" href="#rendering-api-resetviewports"><span>Rendering API <code>resetViewports</code></span></a></h2><p>The <code>resetViewports</code> function resets one or more viewports to their default state, clearing any transformations or modifications applied to the images. This function is useful for restoring the original view settings after user interactions or image manipulations.</p><h3 id="function-signature-6" tabindex="-1"><a class="header-anchor" href="#function-signature-6"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">resetViewports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  elementIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  keys<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token string">&quot;contrast&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;scaleAndTranslation&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;rotation&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;flip&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;zoom&quot;</span><span class="token operator">|</span> <span class="token string">&#39;scaleAndTranslationOriginalSize&#39;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-6" tabindex="-1"><a class="header-anchor" href="#parameters-6"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>elementIds</code></td><td><code>string[]</code></td><td>An array of viewport element IDs to be reset.</td></tr><tr><td><code>keys</code></td><td><code>Array&lt;string&gt;</code></td><td>An array of transformation keys to be reset (optional).</td></tr></tbody></table><h3 id="returns-6" tabindex="-1"><a class="header-anchor" href="#returns-6"><span>Returns</span></a></h3><p>This function does not return any value.</p><h3 id="how-it-works-6" tabindex="-1"><a class="header-anchor" href="#how-it-works-6"><span>How it works</span></a></h3><ol><li><strong>Iterates Over Viewports:</strong><ul><li>Loops through the specified viewport element IDs.</li></ul></li><li><strong>Resets Viewport Transformations:</strong><ul><li>Clears the specified transformations (contrast, scale, translation, rotation, flip, zoom) applied to the viewports.</li><li>Restores the viewports to their default state.</li><li>Logs a message indicating that the viewports have been reset.</li></ul></li><li><strong>Updates Rendered Image:</strong><ul><li>Re-renders the image in each viewport to reflect the changes.</li><li>Ensures that the image is displayed correctly after resetting the viewports.</li></ul></li></ol><h2 id="rendering-api-loadandcacheimage" tabindex="-1"><a class="header-anchor" href="#rendering-api-loadandcacheimage"><span>Rendering API <code>loadAndCacheImage</code></span></a></h2><p>The <code>loadAndCacheImage</code> function loads an image by its index and stores it in the cache for quick access. This function is useful for preloading images and improving rendering performance when navigating through a series of images.</p><h3 id="function-signature-7" tabindex="-1"><a class="header-anchor" href="#function-signature-7"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">loadAndCacheImage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  serieStack<span class="token operator">:</span> Series<span class="token punctuation">,</span></span>
<span class="line">  imageIndex<span class="token operator">:</span> <span class="token builtin">number</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-7" tabindex="-1"><a class="header-anchor" href="#parameters-7"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>serieStack</code></td><td><code>Series</code></td><td>The series stack containing the image data.</td></tr><tr><td><code>imageIndex</code></td><td><code>number</code></td><td>The index of the image to be loaded and cached.</td></tr></tbody></table><h3 id="returns-7" tabindex="-1"><a class="header-anchor" href="#returns-7"><span>Returns</span></a></h3><p>Returns a <code>Promise&lt;void&gt;</code> that resolves when the image is successfully loaded and cached.</p><h3 id="how-it-works-7" tabindex="-1"><a class="header-anchor" href="#how-it-works-7"><span>How it works</span></a></h3><ol><li><strong>Extracts Image Data:</strong><ul><li>Retrieves the image data from the series stack based on the specified index.</li><li>Throws an error if the image data is missing or invalid.</li></ul></li><li><strong>Loads and Caches the Image:</strong><ul><li>Uses the <code>cornerstone.loadAndCacheImage</code> function to load and cache the image.</li><li>Logs a message indicating that the image has been loaded and cached.</li><li>Resolves the promise once the image is successfully cached.</li><li>Rejects the promise if an error occurs during loading or caching.</li><li>Logs an error message if loading or caching fails.</li><li>Updates the store with the cached image data.</li></ul></li><li><strong>Performance Logging and Cleanup:</strong><ul><li>Logs the time taken for loading and caching the image.</li><li>Clears memory references to avoid memory leaks.</li></ul></li></ol><h3 id="example-usage-5" tabindex="-1"><a class="header-anchor" href="#example-usage-5"><span>Example Usage</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">loadAndCacheImage</span><span class="token punctuation">(</span>seriesStack<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Image loaded and cached successfully.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error loading and caching image:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="error-handling-5" tabindex="-1"><a class="header-anchor" href="#error-handling-5"><span>Error Handling</span></a></h3><ul><li>Throws an error if the image data is missing or invalid.</li><li>Rejects the promise if an error occurs during loading or caching.</li><li>Logs an error message if loading or caching fails.</li></ul><h2 id="rendering-api-loadandcacheimages" tabindex="-1"><a class="header-anchor" href="#rendering-api-loadandcacheimages"><span>Rendering API <code>loadAndCacheImages</code></span></a></h2><p>The <code>loadAndCacheImages</code> function loads and caches multiple images based on the provided series metadata. This function is useful for preloading image data and improving rendering performance when displaying a series of images.</p><h3 id="function-signature-8" tabindex="-1"><a class="header-anchor" href="#function-signature-8"><span>Function Signature</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">loadAndCacheImages</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span></span>
<span class="line">  seriesData<span class="token operator">:</span> Series<span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parameters-8" tabindex="-1"><a class="header-anchor" href="#parameters-8"><span>Parameters</span></a></h3><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>seriesData</code></td><td><code>Series[]</code></td><td>An array of series metadata objects containing image data.</td></tr></tbody></table><h3 id="returns-8" tabindex="-1"><a class="header-anchor" href="#returns-8"><span>Returns</span></a></h3><p>Returns a <code>Promise&lt;void&gt;</code> that resolves when all images are successfully loaded and cached.</p><h3 id="how-it-works-8" tabindex="-1"><a class="header-anchor" href="#how-it-works-8"><span>How it works</span></a></h3><ol><li><strong>Iterates Over Series Data:</strong><ul><li>Loops through the array of series metadata objects.</li></ul></li><li><strong>Loads and Caches Images:</strong><ul><li>Calls the <code>loadAndCacheImage</code> function for each series in the array.</li><li>Logs a message indicating that the images have been loaded and cached.</li><li>Resolves the promise once all images are successfully cached.</li><li>Rejects the promise if an error occurs during loading or caching.</li></ul></li><li><strong>Performance Logging and Cleanup:</strong><ul><li>Logs the time taken for loading and caching the images.</li><li>Clears memory references to avoid memory leaks.</li></ul></li></ol><h3 id="example-usage-6" tabindex="-1"><a class="header-anchor" href="#example-usage-6"><span>Example Usage</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">loadAndCacheImages</span><span class="token punctuation">(</span>seriesData<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Images loaded and cached successfully.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error loading and caching images:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="error-handling-6" tabindex="-1"><a class="header-anchor" href="#error-handling-6"><span>Error Handling</span></a></h3><ul><li>Rejects the promise if an error occurs during loading or caching.</li><li>Logs an error message if loading or caching fails.</li><li>Clears memory references to avoid memory leaks.</li></ul><p><br></p><div style="text-align:center;"><img src="https://press.r1-it.storage.cloud.it/logo_trasparent.png" alt="D/Vision Lab" height="200"></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 146220917+laura-borghesi-lum00n@users.noreply.github.com">Laura Borghesi</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/api/loading.html" aria-label="Loading"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Loading</span></div></a><a class="route-link auto-link next" href="/api/interacting.html" aria-label="Interacting"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Interacting</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BVwHBcsb.js" defer></script>
  </body>
</html>
